<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <script src="js/ip.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>青春之舟，乘风破浪！</title>
    <link rel="icon" href="favicon.ico"> 
    <link rel="stylesheet" href="css/style.css">
<script>
document.onkeydown = document.onkeyup = document.onkeypress = function (event) {
	var e = event || window.event || arguments.callee.caller.arguments[0];
	if (e && e.keyCode == 123) {
		mAlert();
		e.returnValue = false;
		return (false);
	}
}
function mAlert() {
	alert("禁止对控制台进行操作！");
}

setInterval(function () {
	debugger;
}, 100)

document.oncontextmenu = function () { return false; };
  function checkCookie() {
    const name = "login=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookieArray = decodedCookie.split(';');
    for(let i = 0; i < cookieArray.length; i++) {
      let cookie = cookieArray[i];
      while (cookie.charAt(0) === ' ') {
        cookie = cookie.substring(1);
      }
      if (cookie.indexOf(name) === 0 && cookie.substring(name.length, cookie.length) === "login_cssdttlzx2003") {
        return true;
      }
    }
    return false;
  }

  if (checkCookie()) {
    window.location.href = "https://%6a%75%6e686%2e%67%69%74%68%75%62%2e%69%6f/2003/20230618%2e%68%74%6d%6c";
  }
</script>
</head>
<body>
<form id="form">
    <div class="box">
        <h2>Login</h2>
        <div class="input-box">
            <label>账号</label>
            <input type="text" id="account"/> 
        </div>
        <div class="input-box">
            <label>密码</label>
            <input type="password" id="password" placeholder="请输入密码"/>
        </div>
        <div class="btn-box">
            <a href="#">忘记密码?</a>
            <div>
                <button type="submit">登录</button>
            </div>
        </div>
    </div>
</form>

<script>
$(function () {
  $('#form').submit(function (e) {
    e.preventDefault();

    const account = $('#account').val();
    const shan = CryptoJS.SHA256(account).toString();

    const passwordInput = $('#password').val();
    const shap = CryptoJS.SHA256(passwordInput).toString();

    $.getJSON('login.json', function (data) {
      let isAuthenticated = false;
      for (let i = 0; i < data.length; i++) {
        const user = data[i];
        if (shan === user.shan && shap === user.shap) {
          setCookie('login', 'login_cssdttlzx2003', 365 * 100);
          window.location.href = user.url;
          isAuthenticated = true;
          break;
        }
      }

      if (!isAuthenticated) {
        alert('用户名或密码错误');
      }
    });
  });
});


      function setCookie(name, value, days) {
        var expires = "";
        if (days) {
          var date = new Date();
          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
          expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "")  + expires + "; path=/";
      }
    });
  </script>

</body>
</html>
